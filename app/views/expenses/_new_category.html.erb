<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<div class="modal-dialog" role="document">
  <div class="modal-content">
      <div class="modal-header">

         <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
         <h3 id="myModalLabel">Add a category</h3>
        
          <div id="errors_div"  class="isa_error">
           
          </div>

      </div>
        <div class="modal-body">
          <div align = "center">
                  <%= label_tag 'name' %>
                  &nbsp;
                  <input type="text" id="category-name" class="" placeholder="Category name">
                  <div class="form-group">
                    <div align ="center">
                      <%= submit_tag "Create category", id: "create_category_button",class:"btn btn-primary" %>
                    </div> 
                  </div> 
          <div>
        </div>
        <div class="modal-footer">
          <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        </div>
  </div>
   




</div>


<script>
$("#error_msg").hide();
  $("#create_category_button").on('click', function ()   {
     event.preventDefault();

     $.ajax({
       url: '/categories/create',
       type: 'POST',
       data: {
          name: $("#category-name").val()
       },
       
       success: function(data){
         if(data.success){
            $('#modal-window').modal('hide');  
            alert("Category created")    
         }
         else
         {
            
            $("#errors_div").html(data.message).show();  
            $("div > div", "#errors_div").show();

         }

       },
       error: function(data){
        if(data.error){
         console.log("fail");
       }
       }
     });
    
   });


</script>

